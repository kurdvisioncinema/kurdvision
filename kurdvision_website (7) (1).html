<!DOCTYPE html>
<html lang="ku" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ú©ÙˆØ±Ø¯ Ú¤ÛŒÚ˜Ù† - KurdVision</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        
        :root {
            --primary-color: #667eea;
            --secondary-color: #764ba2;
            --accent-color: #ffd700;
            --text-color: #ffffff;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, var(--primary-color) 0%, var(--secondary-color) 100%);
            color: var(--text-color);
            min-height: 100vh;
        }
        
        header {
            background: rgba(0, 0, 0, 0.3);
            backdrop-filter: blur(10px);
            padding: 20px 0;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            position: sticky;
            top: 0;
            z-index: 100;
        }
        .container { max-width: 1200px; margin: 0 auto; padding: 0 20px; }
        nav { display: flex; justify-content: space-between; align-items: center; flex-wrap: wrap; gap: 15px; }
        .logo {
            font-size: 32px;
            font-weight: bold;
            background: linear-gradient(45deg, var(--accent-color), #ffed4e);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        .nav-links { display: flex; gap: 25px; list-style: none; flex-wrap: wrap; align-items: center; }
        .nav-links a {
            color: #fff;
            text-decoration: none;
            transition: all 0.3s;
            padding: 8px 15px;
            border-radius: 20px;
        }
        .nav-links a:hover { background: rgba(255, 255, 255, 0.1); color: var(--accent-color); }
        
        .admin-controls {
            display: none;
            gap: 10px;
            flex-wrap: wrap;
        }
        .admin-controls.show { display: flex; }
        .admin-btn, .logout-btn, .settings-btn {
            background: var(--accent-color);
            color: #333;
            border: none;
            padding: 10px 20px;
            border-radius: 25px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s;
            font-size: 14px;
        }
        .settings-btn { background: #4CAF50; color: white; }
        .logout-btn { background: #ff4444; color: white; }
        .admin-btn:hover, .logout-btn:hover, .settings-btn:hover { transform: scale(1.05); }
        
        .hero-slider {
            position: relative;
            height: 550px;
            overflow: hidden;
            margin-bottom: 40px;
        }
        .slide {
            position: absolute;
            width: 100%;
            height: 100%;
            opacity: 0;
            transition: opacity 1s ease-in-out;
            display: flex;
            align-items: flex-end;
        }
        .slide.active { opacity: 1; z-index: 1; }
        .slide-bg {
            position: absolute;
            width: 100%;
            height: 100%;
            object-fit: cover;
            filter: brightness(0.5);
        }
        .slide-content {
            position: relative;
            z-index: 2;
            padding: 60px;
            max-width: 700px;
        }
        .slide-content h1 {
            font-size: 52px;
            margin-bottom: 15px;
            text-shadow: 2px 2px 8px rgba(0,0,0,0.8);
        }
        .slide-meta {
            display: flex;
            gap: 15px;
            margin-bottom: 15px;
            font-size: 16px;
        }
        .slide-badge {
            background: var(--accent-color);
            color: #333;
            padding: 5px 15px;
            border-radius: 20px;
            font-weight: bold;
        }
        .slide-content p {
            font-size: 18px;
            margin-bottom: 25px;
            text-shadow: 1px 1px 4px rgba(0,0,0,0.8);
            line-height: 1.6;
        }
        .slide-btn {
            background: linear-gradient(45deg, var(--accent-color), #ffed4e);
            color: #333;
            padding: 15px 50px;
            border: none;
            border-radius: 30px;
            font-size: 18px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
            display: inline-flex;
            align-items: center;
            gap: 10px;
        }
        .slide-btn:hover { transform: scale(1.05); box-shadow: 0 10px 30px rgba(255,215,0,0.4); }
        
        .slider-controls {
            position: absolute;
            bottom: 30px;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            gap: 10px;
            z-index: 10;
        }
        .slider-dot {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: rgba(255,255,255,0.4);
            cursor: pointer;
            transition: all 0.3s;
        }
        .slider-dot.active { 
            background: var(--accent-color); 
            width: 35px; 
            border-radius: 6px; 
        }
        
        .slider-arrows {
            position: absolute;
            top: 50%;
            width: 100%;
            transform: translateY(-50%);
            display: flex;
            justify-content: space-between;
            padding: 0 20px;
            z-index: 10;
        }
        .slider-arrow {
            background: rgba(0,0,0,0.5);
            color: white;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            border: none;
            font-size: 24px;
            cursor: pointer;
            transition: all 0.3s;
        }
        .slider-arrow:hover { background: rgba(255,215,0,0.8); color: #333; }
        
        .search-box { 
            max-width: 600px; 
            margin: 0 auto 40px; 
            position: relative;
            padding: 0 20px;
        }
        .search-box input {
            width: 100%;
            padding: 15px 50px 15px 20px;
            border: none;
            border-radius: 50px;
            font-size: 16px;
            background: rgba(255, 255, 255, 0.9);
            color: #333;
        }
        .search-box button {
            position: absolute;
            left: 30px;
            top: 50%;
            transform: translateY(-50%);
            background: linear-gradient(45deg, var(--primary-color), var(--secondary-color));
            border: none;
            padding: 10px 20px;
            border-radius: 50px;
            color: #fff;
            cursor: pointer;
            font-weight: bold;
        }
        
        .section-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin: 50px 0 30px;
        }
        .section-title {
            font-size: 32px;
        }
        
        .movies-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 30px;
            padding: 20px 0;
        }
        .movie-card {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            overflow: hidden;
            cursor: pointer;
            transition: all 0.3s;
            border: 1px solid rgba(255, 255, 255, 0.2);
            position: relative;
        }
        .movie-card:hover { transform: scale(1.05); box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3); }
        
        .movie-poster {
            width: 100%;
            height: 350px;
            background: linear-gradient(135deg, var(--primary-color) 0%, var(--secondary-color) 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 60px;
            position: relative;
            overflow: hidden;
        }
        .movie-poster img { width: 100%; height: 100%; object-fit: cover; }
        .play-icon {
            position: absolute;
            font-size: 70px;
            background: rgba(0, 0, 0, 0.6);
            width: 90px;
            height: 90px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s;
        }
        .movie-card:hover .play-icon { background: rgba(255, 215, 0, 0.9); transform: scale(1.1); }
        
        .rating-badge {
            position: absolute;
            top: 10px;
            left: 10px;
            background: rgba(255, 215, 0, 0.95);
            color: #333;
            padding: 5px 10px;
            border-radius: 20px;
            font-size: 14px;
            font-weight: bold;
            display: flex;
            align-items: center;
            gap: 5px;
            z-index: 5;
        }
        
        .view-count {
            position: absolute;
            top: 10px;
            right: 10px;
            background: rgba(0, 0, 0, 0.8);
            padding: 5px 12px;
            border-radius: 20px;
            font-size: 14px;
            display: flex;
            align-items: center;
            gap: 5px;
        }
        .admin-only { display: none; }
        .admin-mode .admin-only { display: flex; }
        
        .movie-info { padding: 20px; }
        .movie-title { font-size: 18px; font-weight: bold; margin-bottom: 10px; }
        .movie-meta { font-size: 14px; opacity: 0.8; margin-bottom: 5px; }
        .badge {
            display: inline-block;
            padding: 5px 10px;
            border-radius: 5px;
            font-size: 12px;
            font-weight: bold;
            margin: 5px 5px 0 0;
        }
        .badge.subtitle { background: var(--accent-color); color: #333; }
        .badge.dubbed { background: #ff6b6b; color: white; }
        
        .delete-btn, .edit-btn {
            position: absolute;
            top: 10px;
            background: #ff4444;
            color: white;
            border: none;
            width: 35px;
            height: 35px;
            border-radius: 50%;
            cursor: pointer;
            font-size: 20px;
            display: none;
            z-index: 10;
        }
        .delete-btn { left: 10px; }
        .edit-btn { left: 55px; background: #4CAF50; }
        .admin-mode .movie-card:hover .delete-btn,
        .admin-mode .movie-card:hover .edit-btn { display: block; }
        
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.9);
            z-index: 1000;
            overflow-y: auto;
        }
        .modal-content {
            background: linear-gradient(135deg, var(--primary-color) 0%, var(--secondary-color) 100%);
            margin: 50px auto;
            padding: 40px;
            max-width: 500px;
            border-radius: 20px;
            position: relative;
        }
        .modal-content.large { max-width: 800px; }
        .close-modal {
            position: absolute;
            top: 15px;
            left: 15px;
            font-size: 30px;
            cursor: pointer;
            color: #fff;
            background: rgba(255, 255, 255, 0.2);
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s;
        }
        .close-modal:hover { background: rgba(255, 255, 255, 0.3); transform: rotate(90deg); }
        
        .modal h2 { text-align: center; margin-bottom: 30px; font-size: 28px; }
        .form-group { margin-bottom: 20px; }
        .form-group label { display: block; margin-bottom: 8px; font-weight: bold; }
        .form-group input, .form-group select, .form-group textarea {
            width: 100%;
            padding: 12px;
            border: none;
            border-radius: 10px;
            font-size: 16px;
            background: rgba(255, 255, 255, 0.9);
            color: #333;
        }
        .form-group textarea { resize: vertical; min-height: 100px; }
        
        .checkbox-group {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 10px;
            background: rgba(255, 255, 255, 0.1);
            padding: 15px;
            border-radius: 10px;
            max-height: 200px;
            overflow-y: auto;
        }
        .checkbox-item {
            display: flex;
            align-items: center;
            gap: 8px;
        }
        .checkbox-item input[type="checkbox"] {
            width: auto;
            cursor: pointer;
        }
        
        .submit-btn {
            width: 100%;
            padding: 15px;
            background: var(--accent-color);
            color: #333;
            border: none;
            border-radius: 10px;
            font-size: 18px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
        }
        .submit-btn:hover { transform: scale(1.02); }
        
        .video-player {
            width: 100%;
            height: 500px;
            background: #000;
            border-radius: 10px;
            margin-bottom: 20px;
        }
        
        .server-tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }
        .server-btn {
            padding: 10px 20px;
            background: rgba(255, 255, 255, 0.1);
            border: 2px solid rgba(255, 255, 255, 0.3);
            color: #fff;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s;
        }
        .server-btn.active { background: var(--accent-color); color: #333; border-color: var(--accent-color); }
        
        .settings-panel {
            max-width: 900px;
            margin: 40px auto;
            padding: 40px;
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: 20px;
        }
        
        .settings-section {
            margin-bottom: 30px;
            padding: 20px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 15px;
        }
        
        .settings-section h3 {
            margin-bottom: 20px;
            font-size: 22px;
            color: var(--accent-color);
        }
        
        .list-manager {
            display: grid;
            gap: 15px;
        }
        
        .list-item {
            background: rgba(255, 255, 255, 0.1);
            padding: 15px;
            border-radius: 10px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .list-item-actions button {
            padding: 8px 15px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-weight: bold;
            margin-left: 10px;
        }
        
        .color-picker-group {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
        }
        
        .color-picker-item {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }
        
        .color-picker-item input[type="color"] {
            width: 100%;
            height: 50px;
            border: none;
            border-radius: 10px;
            cursor: pointer;
        }
        
        #staff-section {
            scroll-margin-top: 80px;
        }
        
        #staff-section .settings-panel {
            background: rgba(255, 255, 255, 0.05);
        }
        
        #staffDisplay > div {
            transition: all 0.3s;
        }
        
        #staffDisplay > div:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
        }
        
        footer {
            background: rgba(0, 0, 0, 0.3);
            backdrop-filter: blur(10px);
            padding: 30px 20px;
            text-align: center;
            margin-top: 80px;
        }
        footer p { opacity: 0.8; margin: 5px 0; }
        
        .loading {
            text-align: center;
            padding: 40px;
            font-size: 18px;
        }
        
        @media (max-width: 768px) {
            .hero-slider { height: 400px; }
            .slide-content { padding: 30px 20px; }
            .slide-content h1 { font-size: 32px; }
            .logo { font-size: 24px; }
            .nav-links { gap: 10px; }
            .modal-content { margin: 20px; padding: 30px 20px; }
            .video-player { height: 300px; }
            .settings-panel { padding: 20px; }
        }
    </style>
</head>
<body>
    <header>
        <div class="container">
            <nav>
                <div class="logo" id="siteLogo">ğŸ¬ <span id="siteNameDisplay">Ú©ÙˆØ±Ø¯ Ú¤ÛŒÚ˜Ù†</span></div>
                <ul class="nav-links" id="dynamicMenu">
                    <li><a href="#" onclick="showTab('all')">Ø³Û•Ø±Û•Ú©ÛŒ</a></li>
                    <li><a href="#" onclick="showTab('latest')">Ù†ÙˆÛØªØ±ÛŒÙ†</a></li>
                    <li><a href="#" onclick="showTab('subtitle')">Ú˜ÛØ±Ù†ÙˆÙˆØ³Ú©Ø±Ø§Ùˆ</a></li>
                    <li><a href="#" onclick="showTab('dubbed')">Ø¯Û†Ø¨Ù„Ø§Ú˜Ú©Ø±Ø§Ùˆ</a></li>
                    <li><a href="#staff-section">ğŸ‘¥ Ø³ØªØ§Ù</a></li>
                    <li id="adminLoginBtn" style="display: none;"><a href="#" onclick="openLogin()" style="background: rgba(255,215,0,0.2);">ğŸ”’ Ø¦Û•Ø¯Ù…ÛŒÙ†</a></li>
                </ul>
                <div class="admin-controls" id="adminControls">
                    <button class="settings-btn" onclick="showSettings()">âš™ï¸ Ú•ÛÚ©Ø®Ø³ØªÙ†</button>
                    <button class="admin-btn" onclick="openAddModal()">â• ÙÛŒÙ„Ù…ÛŒ Ù†ÙˆÛ</button>
                    <button class="logout-btn" onclick="logout()">Ú†ÙˆÙˆÙ†Û• Ø¯Û•Ø±Û•ÙˆÛ•</button>
                </div>
            </nav>
        </div>
    </header>

    <section class="hero-slider" id="heroSlider"></section>

    <div class="search-box">
        <input type="text" id="searchInput" placeholder="Ú¯Û•Ú•Ø§Ù† Ø¨Û• ÙÛŒÙ„Ù… ÛŒØ§Ù† Ø²Ù†Ø¬ÛŒØ±Û•..." onkeyup="searchMovies()">
        <button onclick="searchMovies()">ğŸ” Ú¯Û•Ú•Ø§Ù†</button>
    </div>

    <section class="container" id="moviesSection">
        <div class="section-header">
            <h2 class="section-title">ğŸ”¥ Ù¾ÛØ´Ù†ÛŒØ§Ø±Ú©Ø±Ø§Ùˆ</h2>
        </div>
        <div class="movies-grid" id="featuredGrid"></div>

        <div class="section-header">
            <h2 class="section-title" id="sectionTitle">â­ Ù†ÙˆÛØªØ±ÛŒÙ† ÙÛŒÙ„Ù… Ùˆ Ø²Ù†Ø¬ÛŒØ±Û•Ú©Ø§Ù†</h2>
        </div>
        <div class="movies-grid" id="moviesGrid">
            <div class="loading">Ú†Ø§ÙˆÛ•Ú•Û Ø¨Ú©Û•... Ø¯Ø§ØªØ§Ú©Ø§Ù† Ø¨Ø§Ø±Ø¯Û•Ú©Ø±ÛÙ† ğŸ¬</div>
        </div>
    </section>

    <section class="container" id="staff-section" style="margin-top: 80px; margin-bottom: 40px;">
        <div class="settings-panel">
            <h2 style="text-align: center; margin-bottom: 40px;">ğŸ‘¥ Ø³ØªØ§ÙÛŒ <span id="staffSiteName">Ú©ÙˆØ±Ø¯ Ú¤ÛŒÚ˜Ù†</span></h2>
            <div id="staffDisplay" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px;"></div>
        </div>
    </section>

    <section class="container" id="settingsSection" style="display: none;">
        <div class="settings-panel">
            <h2 style="text-align: center; margin-bottom: 40px;">âš™ï¸ Ú•ÛÚ©Ø®Ø³ØªÙ†Û•Ú©Ø§Ù†ÛŒ ÙˆÛØ¨Ø³Ø§ÛŒØª</h2>
            
            <div class="settings-section">
                <h3>ğŸ¬ Ø¨Û•Ú•ÛÙˆÛ•Ø¨Ø±Ø¯Ù†ÛŒ Slider</h3>
                <button class="submit-btn" style="margin-bottom: 20px;" onclick="openSliderModal()">â• Ø²ÛŒØ§Ø¯Ú©Ø±Ø¯Ù†ÛŒ Slide Ù†ÙˆÛ</button>
                <div class="list-manager" id="sliderManager"></div>
            </div>

            <div class="settings-section">
                <h3>ğŸ“‹ Ø¨Û•Ú•ÛÙˆÛ•Ø¨Ø±Ø¯Ù†ÛŒ Menu</h3>
                <button class="submit-btn" style="margin-bottom: 20px;" onclick="openMenuModal()">â• Ø²ÛŒØ§Ø¯Ú©Ø±Ø¯Ù†ÛŒ Ø¨Û•Ø´ÛŒ Ù†ÙˆÛ</button>
                <div class="list-manager" id="menuManager"></div>
            </div>

            <div class="settings-section">
                <h3>ğŸŒ Ø¨Û•Ú•ÛÙˆÛ•Ø¨Ø±Ø¯Ù†ÛŒ ÙˆÚµØ§ØªÛ•Ú©Ø§Ù†</h3>
                <button class="submit-btn" style="margin-bottom: 20px;" onclick="openCountryModal()">â• Ø²ÛŒØ§Ø¯Ú©Ø±Ø¯Ù†ÛŒ ÙˆÚµØ§ØªÛŒ Ù†ÙˆÛ</button>
                <div class="list-manager" id="countryManager"></div>
            </div>

            <div class="settings-section">
                <h3>ğŸ‘¥ Ø¨Û•Ú•ÛÙˆÛ•Ø¨Ø±Ø¯Ù†ÛŒ Ø³ØªØ§Ù</h3>
                <button class="submit-btn" style="margin-bottom: 20px;" onclick="openStaffModal()">â• Ø²ÛŒØ§Ø¯Ú©Ø±Ø¯Ù†ÛŒ Ø¦Û•Ù†Ø¯Ø§Ù…ÛŒ Ù†ÙˆÛ</button>
                <div class="list-manager" id="staffManager"></div>
            </div>

            <div class="settings-section">
                <h3>ğŸ“ Ø²Ø§Ù†ÛŒØ§Ø±ÛŒ ÙˆÛØ¨Ø³Ø§ÛŒØª</h3>
                <div class="form-group">
                    <label>Ù†Ø§ÙˆÛŒ ÙˆÛØ¨Ø³Ø§ÛŒØª</label>
                    <input type="text" id="settingSiteName" placeholder="Ú©ÙˆØ±Ø¯ Ú¤ÛŒÚ˜Ù†">
                </div>
                <div class="form-group">
                    <label>Ø³Û•Ø±Ø¯ÛÚ•ÛŒ Ù„ÛŒØ³ØªÛŒ ÙÛŒÙ„Ù…Û•Ú©Ø§Ù†</label>
                    <input type="text" id="settingSectionTitle" placeholder="Ù†ÙˆÛØªØ±ÛŒÙ† ÙÛŒÙ„Ù… Ùˆ Ø²Ù†Ø¬ÛŒØ±Û•Ú©Ø§Ù†">
                </div>
            </div>

            <div class="settings-section">
                <h3>ğŸ¨ Ú•Û•Ù†Ú¯Û•Ú©Ø§Ù†</h3>
                <div class="color-picker-group">
                    <div class="color-picker-item">
                        <label>Ú•Û•Ù†Ú¯ÛŒ Ø³Û•Ø±Û•Ú©ÛŒ</label>
                        <input type="color" id="settingPrimaryColor" value="#667eea">
                    </div>
                    <div class="color-picker-item">
                        <label>Ú•Û•Ù†Ú¯ÛŒ Ù„Ø§ÙˆÛ•Ú©ÛŒ</label>
                        <input type="color" id="settingSecondaryColor" value="#764ba2">
                    </div>
                    <div class="color-picker-item">
                        <label>Ú•Û•Ù†Ú¯ÛŒ Ø¯ÙˆÚ¯Ù…Û•Ú©Ø§Ù†</label>
                        <input type="color" id="settingAccentColor" value="#ffd700">
                    </div>
                </div>
            </div>

            <div class="settings-section">
                <h3>ğŸ“„ Ø²Ø§Ù†ÛŒØ§Ø±ÛŒ Footer</h3>
                <div class="form-group">
                    <label>ØªÛÚ©Ø³ØªÛŒ Footer</label>
                    <textarea id="settingFooterText" placeholder="Ø¨ÚµØ§ÙˆÚ©Ø±Ø¯Ù†Û•ÙˆÛ•ÛŒ ÙÛŒÙ„Ù… Ùˆ Ø²Ù†Ø¬ÛŒØ±Û•..."></textarea>
                </div>
            </div>

            <div style="display: flex; gap: 10px;">
                <button class="submit-btn" onclick="saveSettings()">ğŸ’¾ Ù¾Ø§Ø´Û•Ú©Û•ÙˆØªÚ©Ø±Ø¯Ù†</button>
                <button class="submit-btn" style="background: #666;" onclick="hideSettings()">Ú¯Û•Ú•Ø§Ù†Û•ÙˆÛ•</button>
            </div>
        </div>
    </section>

    <footer>
        <div class="container">
            <p style="margin-top: 20px;">Â© 2024 <span id="footerSiteName2">Ú©ÙˆØ±Ø¯ Ú¤ÛŒÚ˜Ù†</span> - Ù‡Û•Ù…ÙˆÙˆ Ù…Ø§ÙÛÚ© Ù¾Ø§Ø±ÛØ²Ø±Ø§ÙˆÛ•</p>
            <p id="footerText">Ø¨ÚµØ§ÙˆÚ©Ø±Ø¯Ù†Û•ÙˆÛ•ÛŒ ÙÛŒÙ„Ù… Ùˆ Ø²Ù†Ø¬ÛŒØ±Û• Ø¨Û• Ú˜ÛØ±Ù†ÙˆÙˆØ³ÛŒ Ùˆ Ø¯Û†Ø¨Ù„Ø§Ú˜ÛŒ Ú©ÙˆØ±Ø¯ÛŒ</p>
        </div>
    </footer>

    <div id="loginModal" class="modal">
        <div class="modal-content">
            <span class="close-modal" onclick="closeLogin()">Ã—</span>
            <h2>ğŸ”’ Ú†ÙˆÙˆÙ†Û• Ú˜ÙˆÙˆØ±Û•ÙˆÛ•ÛŒ Ø¦Û•Ø¯Ù…ÛŒÙ†</h2>
            <form onsubmit="login(event)">
                <div class="form-group">
                    <label>Ø¦ÛŒÙ…Û•ÛŒÚµ</label>
                    <input type="email" id="loginEmail" required placeholder="admin@kurdvision.com">
                </div>
                <div class="form-group">
                    <label>Ù¾Ø§Ø³ÙˆÛ†Ø±Ø¯</label>
                    <input type="password" id="loginPassword" required placeholder="â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢">
                </div>
                <button type="submit" class="submit-btn">Ú†ÙˆÙˆÙ†Û• Ú˜ÙˆÙˆØ±Û•ÙˆÛ•</button>
            </form>
        </div>
    </div>

    <div id="sliderModal" class="modal">
        <div class="modal-content large">
            <span class="close-modal" onclick="closeSliderModal()">Ã—</span>
            <h2 id="sliderModalTitle">â• Ø²ÛŒØ§Ø¯Ú©Ø±Ø¯Ù†ÛŒ Slide Ù†ÙˆÛ</h2>
            <form onsubmit="saveSlide(event)">
                <input type="hidden" id="slideEditId">
                <div class="form-group">
                    <label>Ù†Ø§ÙˆÙ†ÛŒØ´Ø§Ù† *</label>
                    <input type="text" id="slideTitle" required placeholder="Ù†Ø§ÙˆÛŒ ÙÛŒÙ„Ù… ÛŒØ§Ù† Ø²Ù†Ø¬ÛŒØ±Û•">
                </div>
                <div class="form-group">
                    <label>Ø³Ø§Úµ</label>
                    <input type="text" id="slideYear" placeholder="2024">
                </div>
                <div class="form-group">
                    <label>ÙˆÛ•Ø³Ù</label>
                    <textarea id="slideDescription" placeholder="Ú©ÙˆØ±ØªÛ•ÛŒÛ•Ú© Ø¯Û•Ø±Ø¨Ø§Ø±Û•ÛŒ..."></textarea>
                </div>
                <div class="form-group">
                    <label>Ù„ÛŒÙ†Ú©ÛŒ ÙˆÛÙ†Û• (Ù¾Û†Ø³ØªÛ•Ø±) * - Ø¯ÚµÙ†ÛŒØ§Ø¨Û• HTTPS Ø¨ÛØª</label>
                    <input type="url" id="slideImage" required placeholder="https://...">
                </div>
                <div class="form-group">
                    <label>Ù„ÛŒÙ†Ú©ÛŒ ÙÛŒÙ„Ù… (Ø¨Û• Ø¯ÙˆÚ¯Ù…Û•ÛŒ Ø¨ÛŒÙ†ÛŒÙ†)</label>
                    <input type="text" id="slideLink" placeholder="ID ÛŒ ÙÛŒÙ„Ù…Û•Ú©Û•">
                </div>
                <button type="submit" class="submit-btn">âœ… Ù¾Ø§Ø´Û•Ú©Û•ÙˆØªÚ©Ø±Ø¯Ù†</button>
            </form>
        </div>
    </div>

    <div id="menuModal" class="modal">
        <div class="modal-content">
            <span class="close-modal" onclick="closeMenuModal()">Ã—</span>
            <h2 id="menuModalTitle">â• Ø²ÛŒØ§Ø¯Ú©Ø±Ø¯Ù†ÛŒ Ø¨Û•Ø´ÛŒ Ù†ÙˆÛ Ù„Û• Menu</h2>
            <form onsubmit="saveMenuItem(event)">
                <input type="hidden" id="menuEditId">
                <div class="form-group">
                    <label>Ù†Ø§ÙˆÛŒ Ø¨Û•Ø´ *</label>
                    <input type="text" id="menuName" required placeholder="Ù†Ù…ÙˆÙˆÙ†Û•: Ø¯Ø±Ø§Ù…Ø§">
                </div>
                <div class="form-group">
                    <label>Filter Value *</label>
                    <input type="text" id="menuValue" required placeholder="Ù†Ù…ÙˆÙˆÙ†Û•: drama (Ø¨Û• Ø¦ÛŒÙ†Ú¯Ù„ÛŒØ²ÛŒ)">
                    <small style="opacity: 0.7;">Ø¦Û•Ù…Û• Ø¨Û† ÙÙ„ØªÛ•Ø±Ú©Ø±Ø¯Ù†Û•ØŒ Ø¨Û• Ø¦ÛŒÙ†Ú¯Ù„ÛŒØ²ÛŒ Ø¨Ù†ÙˆÙˆØ³Û•</small>
                </div>
                <button type="submit" class="submit-btn">âœ… Ù¾Ø§Ø´Û•Ú©Û•ÙˆØªÚ©Ø±Ø¯Ù†</button>
            </form>
        </div>
    </div>

    <div id="countryModal" class="modal">
        <div class="modal-content">
            <span class="close-modal" onclick="closeCountryModal()">Ã—</span>
            <h2 id="countryModalTitle">â• Ø²ÛŒØ§Ø¯Ú©Ø±Ø¯Ù†ÛŒ ÙˆÚµØ§ØªÛŒ Ù†ÙˆÛ</h2>
            <form onsubmit="saveCountry(event)">
                <input type="hidden" id="countryEditId">
                <div class="form-group">
                    <label>Ù†Ø§ÙˆÛŒ ÙˆÚµØ§Øª *</label>
                    <input type="text" id="countryName" required placeholder="Ù†Ù…ÙˆÙˆÙ†Û•: Ø¦Û•Ù…Ø±ÛŒÚ©Ø§">
                </div>
                <button type="submit" class="submit-btn">âœ… Ù¾Ø§Ø´Û•Ú©Û•ÙˆØªÚ©Ø±Ø¯Ù†</button>
            </form>
        </div>
    </div>

    <div id="staffModal" class="modal">
        <div class="modal-content">
            <span class="close-modal" onclick="closeStaffModal()">Ã—</span>
            <h2 id="staffModalTitle">â• Ø²ÛŒØ§Ø¯Ú©Ø±Ø¯Ù†ÛŒ Ø¦Û•Ù†Ø¯Ø§Ù…ÛŒ Ù†ÙˆÛ</h2>
            <form onsubmit="saveStaff(event)">
                <input type="hidden" id="staffEditId">
                <div class="form-group">
                    <label>Ù†Ø§ÙˆÛŒ Ø¦Û•Ù†Ø¯Ø§Ù… *</label>
                    <input type="text" id="staffName" required placeholder="Ù†Ù…ÙˆÙˆÙ†Û•: Raz Tofiq">
                </div>
                <div class="form-group">
                    <label>Ù¾ÛŒØ´Û•/Ú•Û†Úµ *</label>
                    <input type="text" id="staffRole" required placeholder="Ù†Ù…ÙˆÙˆÙ†Û•: Ø¨Û•Ø±Ù†Ø§Ù…Û•Ù†ÙˆÙˆØ³">
                </div>
                <div class="form-group">
                    <label>Ø¦ÛŒÙ…Û†Ø¬ÛŒ</label>
                    <input type="text" id="staffEmoji" placeholder="Ù†Ù…ÙˆÙˆÙ†Û•: ğŸ’»">
                </div>
                <button type="submit" class="submit-btn">âœ… Ù¾Ø§Ø´Û•Ú©Û•ÙˆØªÚ©Ø±Ø¯Ù†</button>
            </form>
        </div>
    </div>

    <div id="addMovieModal" class="modal">
        <div class="modal-content large">
            <span class="close-modal" onclick="closeAddModal()">Ã—</span>
            <h2 id="movieModalTitle">â• Ø²ÛŒØ§Ø¯Ú©Ø±Ø¯Ù†ÛŒ ÙÛŒÙ„Ù…ÛŒ Ù†ÙˆÛ</h2>
            <form onsubmit="addMovie(event)">
                <input type="hidden" id="movieEditId">
                <div class="form-group">
                    <label>Ø¬Û†Ø± *</label>
                    <select id="movieType" required>
                        <option value="subtitle">Ú˜ÛØ±Ù†ÙˆÙˆØ³Ú©Ø±Ø§Ùˆ</option>
                        <option value="dubbed">Ø¯Û†Ø¨Ù„Ø§Ú˜Ú©Ø±Ø§Ùˆ</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>Ù†Ø§ÙˆÛŒ ÙÛŒÙ„Ù… / Ø²Ù†Ø¬ÛŒØ±Û• *</label>
                    <input type="text" id="movieTitle" required placeholder="Ù†Ù…ÙˆÙˆÙ†Û•: Inception">
                </div>
                <div class="form-group">
                    <label>Ú˜Ø§Ù†Ø± * (Ù‡Û•ÚµØ¨Ú˜ÛØ±Û•)</label>
                    <div class="checkbox-group" id="genreCheckboxes">
                        <div class="checkbox-item"><input type="checkbox" value="Ø¯Ø±Ø§Ù…Ø§"> Ø¯Ø±Ø§Ù…Ø§</div>
                        <div class="checkbox-item"><input type="checkbox" value="Ú©Û†Ù…ÛŒØ¯ÛŒ"> Ú©Û†Ù…ÛŒØ¯ÛŒ</div>
                        <div class="checkbox-item"><input type="checkbox" value="Ø¦Û•Ú©Ø´Ù†"> Ø¦Û•Ú©Ø´Ù†</div>
                        <div class="checkbox-item"><input type="checkbox" value="Ú•Û†Ù…Ø§Ù†Ø³ÛŒ"> Ú•Û†Ù…Ø§Ù†Ø³ÛŒ</div>
                        <div class="checkbox-item"><input type="checkbox" value="ØªÛ†Ù‚ÛÙ†Û•Ø±"> ØªÛ†Ù‚ÛÙ†Û•Ø±</div>
                        <div class="checkbox-item"><input type="checkbox" value="Ø²Ø§Ù†Ø³ØªÛŒ Ø®Û•ÛŒØ§ÚµÛŒ"> Ø²Ø§Ù†Ø³ØªÛŒ Ø®Û•ÛŒØ§ÚµÛŒ</div>
                        <div class="checkbox-item"><input type="checkbox" value="Ø¬ÛŒÙ†Ø§ÛŒÛ•Øª"> Ø¬ÛŒÙ†Ø§ÛŒÛ•Øª</div>
                        <div class="checkbox-item"><input type="checkbox" value="Ù…ÛÚ˜ÙˆÙˆÛŒÛŒ"> Ù…ÛÚ˜ÙˆÙˆÛŒÛŒ</div>
                    </div>
                </div>
                <div class="form-group">
                    <label>ÙˆÚµØ§Øª *</label>
                    <select id="movieCountry" required>
                        <option value="">Ù‡Û•ÚµØ¨Ú˜ÛØ±Û•...</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>Ø³Ø§Úµ *</label>
                    <input type="text" id="movieYear" required placeholder="2024">
                </div>
                <div class="form-group">
                    <label>â­ Ú•Û•ÛŒØªÛŒÙ†Ú¯ (Ù„Û• 10)</label>
                    <input type="number" id="movieRating" min="0" max="10" step="0.1" placeholder="8.5">
                </div>
                <div class="form-group">
                    <label>Ù„ÛŒÙ†Ú©ÛŒ Ù¾Û†Ø³ØªÛ•Ø± * - Ø¯ÚµÙ†ÛŒØ§Ø¨Û• HTTPS Ø¨ÛØª</label>
                    <input type="url" id="moviePoster" required placeholder="https://image.tmdb.org/t/p/w500/...">
                </div>
                <div class="form-group">
                    <label>Ù„ÛŒÙ†Ú©ÛŒ Ú¤ÛŒØ¯ÛŒÛ† - Ø³ÛØ±Ú¤Û•Ø± Ù¡ (Upstream) * - Ø¨Û Ú•ÛŒÚ©Ù„Ø§Ù…</label>
                    <input type="url" id="videoServer1" required placeholder="https://upstream.to/embed-xxxxx">
                    <small style="opacity: 0.7;">Ù¾ÛØ´Ù†ÛŒØ§Ø±: Upstream.to - Ø¨Û Ú•ÛŒÚ©Ù„Ø§Ù…ÛŒ Ù†Û•Ø´ÛŒØ§Ùˆ</small>
                </div>
                <div class="form-group">
                    <label>Ù„ÛŒÙ†Ú©ÛŒ Ú¤ÛŒØ¯ÛŒÛ† - Ø³ÛØ±Ú¤Û•Ø± Ù¢ (Filemoon)</label>
                    <input type="url" id="videoServer2" placeholder="https://filemoon.sx/e/xxxxx">
                    <small style="opacity: 0.7;">Ù¾ÛØ´Ù†ÛŒØ§Ø±: Filemoon.sx - Ú•ÛŒÚ©Ù„Ø§Ù…ÛŒ Ú©Û•Ù…</small>
                </div>
                <div class="form-group">
                    <label>Ù„ÛŒÙ†Ú©ÛŒ Ú¤ÛŒØ¯ÛŒÛ† - Ø³ÛØ±Ú¤Û•Ø± Ù£ (MixDrop)</label>
                    <input type="url" id="videoServer3" placeholder="https://mixdrop.co/e/xxxxx">
                    <small style="opacity: 0.7;">Ù¾ÛØ´Ù†ÛŒØ§Ø±: MixDrop.co - Ø®ÛØ±Ø§</small>
                </div>
                <div class="form-group">
                    <label>ÙˆØ±Ø¯Û•Ú©Ø§Ø±ÛŒ</label>
                    <textarea id="movieDescription" placeholder="Ú©ÙˆØ±ØªÛ•ÛŒÛ•Ú© Ø¯Û•Ø±Ø¨Ø§Ø±Û•ÛŒ ÙÛŒÙ„Ù…Û•Ú©Û•..."></textarea>
                </div>
                <div class="form-group">
                    <label>Ù¾ÛØ´Ù†ÛŒØ§Ø±Ú©Ø±Ø§ÙˆØŸ</label>
                    <select id="movieFeatured">
                        <option value="false">Ù†Û•Ø®ÛØ±</option>
                        <option value="true">Ø¨Û•ÚµÛ</option>
                    </select>
                </div>
                <button type="submit" class="submit-btn" id="movieSubmitBtn">âœ… Ø²ÛŒØ§Ø¯Ú©Ø±Ø¯Ù†</button>
            </form>
        </div>
    </div>

    <div id="watchModal" class="modal">
        <div class="modal-content large">
            <span class="close-modal" onclick="closeWatchModal()">Ã—</span>
            <div id="watchContent"></div>
        </div>
    </div>

    <script type="module">
        import { initializeApp } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js';
        import { getDatabase, ref, push, set, onValue, remove, update } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-database.js';
        import { getAuth, signInWithEmailAndPassword, signOut, onAuthStateChanged } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js';

        const firebaseConfig = {
            apiKey: "AIzaSyAaE1v9PcHGsSgF1IlnDrygX5TT2-zii8o",
            authDomain: "kurdvision-f9d3e.firebaseapp.com",
            databaseURL: "https://kurdvision-f9d3e-default-rtdb.europe-west1.firebasedatabase.app",
            projectId: "kurdvision-f9d3e",
            storageBucket: "kurdvision-f9d3e.firebasestorage.app",
            messagingSenderId: "704463916853",
            appId: "1:704463916853:web:237616584ecaf85309467c",
            measurementId: "G-3836008KY4"
        };

        const app = initializeApp(firebaseConfig);
        const database = getDatabase(app);
        const auth = getAuth(app);

        let movies = [];
        let slides = [];
        let menuItems = [];
        let countries = [];
        let staffMembers = [];
        let isAdmin = false;
        let currentFilter = 'all';
        let currentSlide = 0;
        let sliderInterval;

        window.onload = function() {
            loadMovies();
            loadSlides();
            loadMenuItems();
            loadCountries();
            loadStaff();
            checkAuthState();
            loadSettings();
            
            const urlParams = new URLSearchParams(window.location.search);
            if (urlParams.get('admin') === 'true') {
                document.getElementById('adminLoginBtn').style.display = 'block';
            }
        };

        function checkAuthState() {
            onAuthStateChanged(auth, (user) => {
                if (user) {
                    isAdmin = true;
                    document.getElementById('adminControls').classList.add('show');
                    document.body.classList.add('admin-mode');
                } else {
                    isAdmin = false;
                    document.getElementById('adminControls').classList.remove('show');
                    document.body.classList.remove('admin-mode');
                }
            });
        }

        function loadCountries() {
            const countriesRef = ref(database, 'countries');
            onValue(countriesRef, (snapshot) => {
                countries = [];
                snapshot.forEach((childSnapshot) => {
                    countries.push({
                        id: childSnapshot.key,
                        ...childSnapshot.val()
                    });
                });
                updateCountrySelect();
                displayCountryManager();
            });
        }

        function updateCountrySelect() {
            const select = document.getElementById('movieCountry');
            select.innerHTML = '<option value="">Ù‡Û•ÚµØ¨Ú˜ÛØ±Û•...</option>';
            countries.forEach(country => {
                select.innerHTML += `<option value="${country.name}">${country.name}</option>`;
            });
        }

        function displayCountryManager() {
            if (!isAdmin) return;
            const manager = document.getElementById('countryManager');
            if (countries.length === 0) {
                manager.innerHTML = '<p style="text-align: center; opacity: 0.7;">Ù‡ÛŒÚ† ÙˆÚµØ§ØªÛÚ© Ù†ÛŒÛŒÛ•</p>';
                return;
            }
            
            manager.innerHTML = countries.map(country => `
                <div class="list-item">
                    <div>${country.name}</div>
                    <div class="list-item-actions">
                        <button style="background: #4CAF50; color: white;" onclick="editCountry('${country.id}')">âœï¸ Ø¯Û•Ø³ØªÚ©Ø§Ø±ÛŒ</button>
                        <button style="background: #ff4444; color: white;" onclick="deleteCountry('${country.id}')">ğŸ—‘ï¸</button>
                    </div>
                </div>
            `).join('');
        }

        window.openCountryModal = function() {
            document.getElementById('countryModalTitle').textContent = 'â• Ø²ÛŒØ§Ø¯Ú©Ø±Ø¯Ù†ÛŒ ÙˆÚµØ§ØªÛŒ Ù†ÙˆÛ';
            document.getElementById('countryEditId').value = '';
            document.getElementById('countryName').value = '';
            document.getElementById('countryModal').style.display = 'block';
        };

        window.closeCountryModal = function() {
            document.getElementById('countryModal').style.display = 'none';
        };

        window.editCountry = function(countryId) {
            const country = countries.find(c => c.id === countryId);
            if (!country) return;
            
            document.getElementById('countryModalTitle').textContent = 'âœï¸ Ø¯Û•Ø³ØªÚ©Ø§Ø±ÛŒÚ©Ø±Ø¯Ù†ÛŒ ÙˆÚµØ§Øª';
            document.getElementById('countryEditId').value = countryId;
            document.getElementById('countryName').value = country.name;
            document.getElementById('countryModal').style.display = 'block';
        };

        window.saveCountry = function(event) {
            event.preventDefault();
            
            const countryId = document.getElementById('countryEditId').value;
            const countryData = {
                name: document.getElementById('countryName').value
            };

            if (countryId) {
                const countryRef = ref(database, 'countries/' + countryId);
                update(countryRef, countryData)
                    .then(() => {
                        closeCountryModal();
                        alert('âœ… ÙˆÚµØ§Øª Ø¯Û•Ø³ØªÚ©Ø§Ø±ÛŒ Ú©Ø±Ø§!');
                    })
                    .catch((error) => alert('âŒ Ù‡Û•ÚµÛ•: ' + error.message));
            } else {
                const countriesRef = ref(database, 'countries');
                const newCountryRef = push(countriesRef);
                set(newCountryRef, countryData)
                    .then(() => {
                        closeCountryModal();
                        alert('âœ… ÙˆÚµØ§Øª Ø²ÛŒØ§Ø¯ Ú©Ø±Ø§!');
                        event.target.reset();
                    })
                    .catch((error) => alert('âŒ Ù‡Û•ÚµÛ•: ' + error.message));
            }
        };

        window.deleteCountry = function(countryId) {
            if (confirm('Ø¯ÚµÙ†ÛŒØ§ÛŒØª Ø¯Û•ØªÛ•ÙˆÛØª Ø¦Û•Ù… ÙˆÚµØ§ØªÛ• Ø¨Ø³Ú•ÛŒØªÛ•ÙˆÛ•ØŸ')) {
                const countryRef = ref(database, 'countries/' + countryId);
                remove(countryRef)
                    .then(() => alert('âœ… ÙˆÚµØ§Øª Ø³Ú•Ø§ÛŒÛ•ÙˆÛ•!'))
                    .catch((error) => alert('âŒ Ù‡Û•ÚµÛ•: ' + error.message));
            }
        };

        function loadStaff() {
            const staffRef = ref(database, 'staff');
            onValue(staffRef, (snapshot) => {
                staffMembers = [];
                snapshot.forEach((childSnapshot) => {
                    staffMembers.push({
                        id: childSnapshot.key,
                        ...childSnapshot.val()
                    });
                });
                displayStaff();
                displayStaffManager();
            });
        }

        function displayStaff() {
            const display = document.getElementById('staffDisplay');
            
            if (staffMembers.length === 0) {
                display.innerHTML = '<p style="text-align: center; opacity: 0.7; grid-column: 1/-1;">Ù‡ÛŒÚ† Ø¦Û•Ù†Ø¯Ø§Ù…ÛÚ© Ù†ÛŒÛŒÛ•</p>';
                return;
            }
            
            display.innerHTML = staffMembers.map(member => `
                <div style="background: rgba(255,255,255,0.1); padding: 30px; border-radius: 15px; text-align: center;">
                    <div style="font-size: 50px; margin-bottom: 15px;">${member.emoji || 'ğŸ‘¤'}</div>
                    <h3 style="margin-bottom: 10px;">${member.name}</h3>
                    <p style="opacity: 0.8;">${member.role}</p>
                </div>
            `).join('');
        }

        function displayStaffManager() {
            if (!isAdmin) return;
            const manager = document.getElementById('staffManager');
            if (staffMembers.length === 0) {
                manager.innerHTML = '<p style="text-align: center; opacity: 0.7;">Ù‡ÛŒÚ† Ø¦Û•Ù†Ø¯Ø§Ù…ÛÚ© Ù†ÛŒÛŒÛ•</p>';
                return;
            }
            
            manager.innerHTML = staffMembers.map(member => `
                <div class="list-item">
                    <div>
                        <strong>${member.emoji || 'ğŸ‘¤'} ${member.name}</strong>
                        <small style="opacity: 0.7; display: block;">${member.role}</small>
                    </div>
                    <div class="list-item-actions">
                        <button style="background: #4CAF50; color: white;" onclick="editStaff('${member.id}')">âœï¸ Ø¯Û•Ø³ØªÚ©Ø§Ø±ÛŒ</button>
                        <button style="background: #ff4444; color: white;" onclick="deleteStaff('${member.id}')">ğŸ—‘ï¸</button>
                    </div>
                </div>
            `).join('');
        }

        window.openStaffModal = function() {
            document.getElementById('staffModalTitle').textContent = 'â• Ø²ÛŒØ§Ø¯Ú©Ø±Ø¯Ù†ÛŒ Ø¦Û•Ù†Ø¯Ø§Ù…ÛŒ Ù†ÙˆÛ';
            document.getElementById('staffEditId').value = '';
            document.getElementById('staffName').value = '';
            document.getElementById('staffRole').value = '';
            document.getElementById('staffEmoji').value = '';
            document.getElementById('staffModal').style.display = 'block';
        };

        window.closeStaffModal = function() {
            document.getElementById('staffModal').style.display = 'none';
        };

        window.editStaff = function(staffId) {
            const member = staffMembers.find(s => s.id === staffId);
            if (!member) return;
            
            document.getElementById('staffModalTitle').textContent = 'âœï¸ Ø¯Û•Ø³ØªÚ©Ø§Ø±ÛŒÚ©Ø±Ø¯Ù†ÛŒ Ø¦Û•Ù†Ø¯Ø§Ù…';
            document.getElementById('staffEditId').value = staffId;
            document.getElementById('staffName').value = member.name;
            document.getElementById('staffRole').value = member.role;
            document.getElementById('staffEmoji').value = member.emoji || '';
            document.getElementById('staffModal').style.display = 'block';
        };

        window.saveStaff = function(event) {
            event.preventDefault();
            
            const staffId = document.getElementById('staffEditId').value;
            const staffData = {
                name: document.getElementById('staffName').value,
                role: document.getElementById('staffRole').value,
                emoji: document.getElementById('staffEmoji').value || 'ğŸ‘¤'
            };

            if (staffId) {
                const staffRef = ref(database, 'staff/' + staffId);
                update(staffRef, staffData)
                    .then(() => {
                        closeStaffModal();
                        alert('âœ… Ø¦Û•Ù†Ø¯Ø§Ù… Ø¯Û•Ø³ØªÚ©Ø§Ø±ÛŒ Ú©Ø±Ø§!');
                    })
                    .catch((error) => alert('âŒ Ù‡Û•ÚµÛ•: ' + error.message));
            } else {
                const staffRef = ref(database, 'staff');
                const newStaffRef = push(staffRef);
                set(newStaffRef, staffData)
                    .then(() => {
                        closeStaffModal();
                        alert('âœ… Ø¦Û•Ù†Ø¯Ø§Ù… Ø²ÛŒØ§Ø¯ Ú©Ø±Ø§!');
                        event.target.reset();
                    })
                    .catch((error) => alert('âŒ Ù‡Û•ÚµÛ•: ' + error.message));
            }
        };

        window.deleteStaff = function(staffId) {
            if (confirm('Ø¯ÚµÙ†ÛŒØ§ÛŒØª Ø¯Û•ØªÛ•ÙˆÛØª Ø¦Û•Ù… Ø¦Û•Ù†Ø¯Ø§Ù…Û• Ø¨Ø³Ú•ÛŒØªÛ•ÙˆÛ•ØŸ')) {
                const staffRef = ref(database, 'staff/' + staffId);
                remove(staffRef)
                    .then(() => alert('âœ… Ø¦Û•Ù†Ø¯Ø§Ù… Ø³Ú•Ø§ÛŒÛ•ÙˆÛ•!'))
                    .catch((error) => alert('âŒ Ù‡Û•ÚµÛ•: ' + error.message));
            }
        };

        function loadMenuItems() {
            const menuRef = ref(database, 'menuItems');
            onValue(menuRef, (snapshot) => {
                menuItems = [];
                snapshot.forEach((childSnapshot) => {
                    menuItems.push({
                        id: childSnapshot.key,
                        ...childSnapshot.val()
                    });
                });
                updateDynamicMenu();
                displayMenuManager();
            });
        }

        function updateDynamicMenu() {
            const menu = document.getElementById('dynamicMenu');
            const baseItems = `
                <li><a href="#" onclick="showTab('all')">Ø³Û•Ø±Û•Ú©ÛŒ</a></li>
                <li><a href="#" onclick="showTab('latest')">Ù†ÙˆÛØªØ±ÛŒÙ†</a></li>
                <li><a href="#" onclick="showTab('subtitle')">Ú˜ÛØ±Ù†ÙˆÙˆØ³Ú©Ø±Ø§Ùˆ</a></li>
                <li><a href="#" onclick="showTab('dubbed')">Ø¯Û†Ø¨Ù„Ø§Ú˜Ú©Ø±Ø§Ùˆ</a></li>
            `;
            
            const customItems = menuItems.map(item => 
                `<li><a href="#" onclick="showTab('${item.value}')">${item.name}</a></li>`
            ).join('');
            
            menu.innerHTML = baseItems + customItems + `
                <li><a href="#staff-section">ğŸ‘¥ Ø³ØªØ§Ù</a></li>
                <li id="adminLoginBtn" style="display: ${new URLSearchParams(window.location.search).get('admin') === 'true' ? 'block' : 'none'};"><a href="#" onclick="openLogin()" style="background: rgba(255,215,0,0.2);">ğŸ”’ Ø¦Û•Ø¯Ù…ÛŒÙ†</a></li>
            `;
        }

        function displayMenuManager() {
            if (!isAdmin) return;
            const manager = document.getElementById('menuManager');
            if (menuItems.length === 0) {
                manager.innerHTML = '<p style="text-align: center; opacity: 0.7;">Ù‡ÛŒÚ† Ø¨Û•Ø´ÛÚ© Ù†ÛŒÛŒÛ•</p>';
                return;
            }
            
            manager.innerHTML = menuItems.map(item => `
                <div class="list-item">
                    <div>
                        <strong>${item.name}</strong>
                        <small style="opacity: 0.7; display: block;">Filter: ${item.value}</small>
                    </div>
                    <div class="list-item-actions">
                        <button style="background: #4CAF50; color: white;" onclick="editMenuItem('${item.id}')">âœï¸ Ø¯Û•Ø³ØªÚ©Ø§Ø±ÛŒ</button>
                        <button style="background: #ff4444; color: white;" onclick="deleteMenuItem('${item.id}')">ğŸ—‘ï¸</button>
                    </div>
                </div>
            `).join('');
        }

        window.openMenuModal = function() {
            document.getElementById('menuModalTitle').textContent = 'â• Ø²ÛŒØ§Ø¯Ú©Ø±Ø¯Ù†ÛŒ Ø¨Û•Ø´ÛŒ Ù†ÙˆÛ';
            document.getElementById('menuEditId').value = '';
            document.getElementById('menuName').value = '';
            document.getElementById('menuValue').value = '';
            document.getElementById('menuModal').style.display = 'block';
        };

        window.closeMenuModal = function() {
            document.getElementById('menuModal').style.display = 'none';
        };

        window.editMenuItem = function(menuId) {
            const item = menuItems.find(m => m.id === menuId);
            if (!item) return;
            
            document.getElementById('menuModalTitle').textContent = 'âœï¸ Ø¯Û•Ø³ØªÚ©Ø§Ø±ÛŒÚ©Ø±Ø¯Ù†ÛŒ Ø¨Û•Ø´';
            document.getElementById('menuEditId').value = menuId;
            document.getElementById('menuName').value = item.name;
            document.getElementById('menuValue').value = item.value;
            document.getElementById('menuModal').style.display = 'block';
        };

        window.saveMenuItem = function(event) {
            event.preventDefault();
            
            const menuId = document.getElementById('menuEditId').value;
            const menuData = {
                name: document.getElementById('menuName').value,
                value: document.getElementById('menuValue').value
            };

            if (menuId) {
                const menuRef = ref(database, 'menuItems/' + menuId);
                update(menuRef, menuData)
                    .then(() => {
                        closeMenuModal();
                        alert('âœ… Ø¨Û•Ø´ Ø¯Û•Ø³ØªÚ©Ø§Ø±ÛŒ Ú©Ø±Ø§!');
                    })
                    .catch((error) => alert('âŒ Ù‡Û•ÚµÛ•: ' + error.message));
            } else {
                const menuItemsRef = ref(database, 'menuItems');
                const newMenuRef = push(menuItemsRef);
                set(newMenuRef, menuData)
                    .then(() => {
                        closeMenuModal();
                        alert('âœ… Ø¨Û•Ø´ Ø²ÛŒØ§Ø¯ Ú©Ø±Ø§!');
                        event.target.reset();
                    })
                    .catch((error) => alert('âŒ Ù‡Û•ÚµÛ•: ' + error.message));
            }
        };

        window.deleteMenuItem = function(menuId) {
            if (confirm('Ø¯ÚµÙ†ÛŒØ§ÛŒØª Ø¯Û•ØªÛ•ÙˆÛØª Ø¦Û•Ù… Ø¨Û•Ø´Û• Ø¨Ø³Ú•ÛŒØªÛ•ÙˆÛ•ØŸ')) {
                const menuRef = ref(database, 'menuItems/' + menuId);
                remove(menuRef)
                    .then(() => alert('âœ… Ø¨Û•Ø´ Ø³Ú•Ø§ÛŒÛ•ÙˆÛ•!'))
                    .catch((error) => alert('âŒ Ù‡Û•ÚµÛ•: ' + error.message));
            }
        };

        function loadSlides() {
            const slidesRef = ref(database, 'slides');
            onValue(slidesRef, (snapshot) => {
                slides = [];
                snapshot.forEach((childSnapshot) => {
                    slides.push({
                        id: childSnapshot.key,
                        ...childSnapshot.val()
                    });
                });
                displaySlider();
                displaySliderManager();
            });
        }

        function displaySlider() {
            const sliderEl = document.getElementById('heroSlider');
            if (slides.length === 0) {
                sliderEl.style.display = 'none';
                return;
            }
            sliderEl.style.display = 'block';
            
            sliderEl.innerHTML = slides.map((slide, index) => `
                <div class="slide ${index === 0 ? 'active' : ''}">
                    <img src="${slide.image}" alt="${slide.title}" class="slide-bg">
                    <div class="slide-content">
                        <h1>${slide.title}</h1>
                        ${slide.year ? `<div class="slide-meta"><span class="slide-badge">${slide.year}</span></div>` : ''}
                        ${slide.description ? `<p>${slide.description}</p>` : ''}
                        ${slide.link ? `<button class="slide-btn" onclick="openMovieById('${slide.link}')">â–¶ ØªÛØ¨ÛŒÙ†ÛŒ ØªÛ•Ù…Ø§Ø´Ø§ Ø¨Ú©Û•</button>` : ''}
                    </div>
                </div>
            `).join('');

            if (slides.length > 1) {
                const dotsHTML = slides.map((_, index) => 
                    `<div class="slider-dot ${index === 0 ? 'active' : ''}" onclick="goToSlide(${index})"></div>`
                ).join('');
                sliderEl.innerHTML += `
                    <div class="slider-controls">${dotsHTML}</div>
                    <div class="slider-arrows">
                        <button class="slider-arrow" onclick="prevSlide()">â€¹</button>
                        <button class="slider-arrow" onclick="nextSlide()">â€º</button>
                    </div>
                `;
                startSlider();
            }
        }

        function startSlider() {
            if (sliderInterval) clearInterval(sliderInterval);
            sliderInterval = setInterval(() => {
                currentSlide = (currentSlide + 1) % slides.length;
                updateSlider();
            }, 5000);
        }

        window.goToSlide = function(index) {
            currentSlide = index;
            updateSlider();
            startSlider();
        };

        window.nextSlide = function() {
            currentSlide = (currentSlide + 1) % slides.length;
            updateSlider();
            startSlider();
        };

        window.prevSlide = function() {
            currentSlide = (currentSlide - 1 + slides.length) % slides.length;
            updateSlider();
            startSlider();
        };

        function updateSlider() {
            document.querySelectorAll('.slide').forEach((slide, index) => {
                slide.classList.toggle('active', index === currentSlide);
            });
            document.querySelectorAll('.slider-dot').forEach((dot, index) => {
                dot.classList.toggle('active', index === currentSlide);
            });
        }

        function displaySliderManager() {
            if (!isAdmin) return;
            const manager = document.getElementById('sliderManager');
            if (slides.length === 0) {
                manager.innerHTML = '<p style="text-align: center; opacity: 0.7;">Ù‡ÛŒÚ† Slide ÛÚ© Ù†ÛŒÛŒÛ•</p>';
                return;
            }
            
            manager.innerHTML = slides.map(slide => `
                <div class="list-item">
                    <div>
                        <strong>${slide.title}</strong>
                        <small style="opacity: 0.7; display: block;">${slide.description || 'Ø¨Û ÙˆÛ•Ø³Ù'}</small>
                    </div>
                    <div class="list-item-actions">
                        <button style="background: #4CAF50; color: white;" onclick="editSlide('${slide.id}')">âœï¸</button>
                        <button style="background: #ff4444; color: white;" onclick="deleteSlide('${slide.id}')">ğŸ—‘ï¸</button>
                    </div>
                </div>
            `).join('');
        }

        window.openSliderModal = function() {
            document.getElementById('sliderModalTitle').textContent = 'â• Ø²ÛŒØ§Ø¯Ú©Ø±Ø¯Ù†ÛŒ Slide Ù†ÙˆÛ';
            document.getElementById('slideEditId').value = '';
            document.getElementById('slideTitle').value = '';
            document.getElementById('slideYear').value = '';
            document.getElementById('slideDescription').value = '';
            document.getElementById('slideImage').value = '';
            document.getElementById('slideLink').value = '';
            document.getElementById('sliderModal').style.display = 'block';
        };

        window.closeSliderModal = function() {
            document.getElementById('sliderModal').style.display = 'none';
        };

        window.editSlide = function(slideId) {
            const slide = slides.find(s => s.id === slideId);
            if (!slide) return;
            
            document.getElementById('sliderModalTitle').textContent = 'âœï¸ Ø¯Û•Ø³ØªÚ©Ø§Ø±ÛŒÚ©Ø±Ø¯Ù†ÛŒ Slide';
            document.getElementById('slideEditId').value = slideId;
            document.getElementById('slideTitle').value = slide.title;
            document.getElementById('slideYear').value = slide.year || '';
            document.getElementById('slideDescription').value = slide.description || '';
            document.getElementById('slideImage').value = slide.image;
            document.getElementById('slideLink').value = slide.link || '';
            document.getElementById('sliderModal').style.display = 'block';
        };

        window.saveSlide = function(event) {
            event.preventDefault();
            
            const slideId = document.getElementById('slideEditId').value;
            
            let imageUrl = document.getElementById('slideImage').value;
            if (imageUrl.startsWith('http://')) {
                imageUrl = imageUrl.replace('http://', 'https://');
                alert('âš ï¸ Ù„ÛŒÙ†Ú©ÛŒ ÙˆÛÙ†Û•Ú©Û• Ú¯Û†Ú•Ø¯Ø±Ø§ Ø¨Û† HTTPS');
            }
            
            const slideData = {
                title: document.getElementById('slideTitle').value,
                year: document.getElementById('slideYear').value,
                description: document.getElementById('slideDescription').value,
                image: imageUrl,
                link: document.getElementById('slideLink').value,
                date: new Date().toISOString()
            };

            if (slideId) {
                const slideRef = ref(database, 'slides/' + slideId);
                update(slideRef, slideData)
                    .then(() => {
                        closeSliderModal();
                        alert('âœ… Slide Ø¯Û•Ø³ØªÚ©Ø§Ø±ÛŒ Ú©Ø±Ø§!');
                    })
                    .catch((error) => alert('âŒ Ù‡Û•ÚµÛ•: ' + error.message));
            } else {
                const slidesRef = ref(database, 'slides');
                const newSlideRef = push(slidesRef);
                set(newSlideRef, slideData)
                    .then(() => {
                        closeSliderModal();
                        alert('âœ… Slide Ø²ÛŒØ§Ø¯ Ú©Ø±Ø§!');
                        event.target.reset();
                    })
                    .catch((error) => alert('âŒ Ù‡Û•ÚµÛ•: ' + error.message));
            }
        };

        window.deleteSlide = function(slideId) {
            if (confirm('Ø¯ÚµÙ†ÛŒØ§ÛŒØª Ø¯Û•ØªÛ•ÙˆÛØª Ø¦Û•Ù… Slide Ø¨Ø³Ú•ÛŒØªÛ•ÙˆÛ•ØŸ')) {
                const slideRef = ref(database, 'slides/' + slideId);
                remove(slideRef)
                    .then(() => alert('âœ… Slide Ø³Ú•Ø§ÛŒÛ•ÙˆÛ•!'))
                    .catch((error) => alert('âŒ Ù‡Û•ÚµÛ•: ' + error.message));
            }
        };

        function loadSettings() {
            const settingsRef = ref(database, 'settings');
            onValue(settingsRef, (snapshot) => {
                const settings = snapshot.val();
                if (settings) {
                    applySettings(settings);
                }
            });
        }

        function applySettings(settings) {
            if (settings.siteName) {
                document.getElementById('siteNameDisplay').textContent = settings.siteName;
                document.getElementById('staffSiteName').textContent = settings.siteName;
                document.getElementById('footerSiteName2').textContent = settings.siteName;
                document.title = settings.siteName;
            }
            if (settings.sectionTitle) {
                document.getElementById('sectionTitle').textContent = settings.sectionTitle;
            }
            if (settings.footerText) {
                document.getElementById('footerText').textContent = settings.footerText;
            }
            
            if (settings.primaryColor) {
                document.documentElement.style.setProperty('--primary-color', settings.primaryColor);
            }
            if (settings.secondaryColor) {
                document.documentElement.style.setProperty('--secondary-color', settings.secondaryColor);
            }
            if (settings.accentColor) {
                document.documentElement.style.setProperty('--accent-color', settings.accentColor);
            }
        }

        window.showSettings = function() {
            document.getElementById('moviesSection').style.display = 'none';
            document.getElementById('settingsSection').style.display = 'block';
            
            const settingsRef = ref(database, 'settings');
            onValue(settingsRef, (snapshot) => {
                const settings = snapshot.val() || {};
                document.getElementById('settingSiteName').value = settings.siteName || 'Ú©ÙˆØ±Ø¯ Ú¤ÛŒÚ˜Ù†';
                document.getElementById('settingSectionTitle').value = settings.sectionTitle || 'Ù†ÙˆÛØªØ±ÛŒÙ† ÙÛŒÙ„Ù… Ùˆ Ø²Ù†Ø¬ÛŒØ±Û•Ú©Ø§Ù†';
                document.getElementById('settingFooterText').value = settings.footerText || 'Ø¨ÚµØ§ÙˆÚ©Ø±Ø¯Ù†Û•ÙˆÛ•ÛŒ ÙÛŒÙ„Ù… Ùˆ Ø²Ù†Ø¬ÛŒØ±Û• Ø¨Û• Ú˜ÛØ±Ù†ÙˆÙˆØ³ÛŒ Ùˆ Ø¯Û†Ø¨Ù„Ø§Ú˜ÛŒ Ú©ÙˆØ±Ø¯ÛŒ';
                document.getElementById('settingPrimaryColor').value = settings.primaryColor || '#667eea';
                document.getElementById('settingSecondaryColor').value = settings.secondaryColor || '#764ba2';
                document.getElementById('settingAccentColor').value = settings.accentColor || '#ffd700';
            });
        };

        window.hideSettings = function() {
            document.getElementById('moviesSection').style.display = 'block';
            document.getElementById('settingsSection').style.display = 'none';
        };

        window.saveSettings = function() {
            const newSettings = {
                siteName: document.getElementById('settingSiteName').value,
                sectionTitle: document.getElementById('settingSectionTitle').value,
                footerText: document.getElementById('settingFooterText').value,
                primaryColor: document.getElementById('settingPrimaryColor').value,
                secondaryColor: document.getElementById('settingSecondaryColor').value,
                accentColor: document.getElementById('settingAccentColor').value
            };

            const settingsRef = ref(database, 'settings');
            set(settingsRef, newSettings)
                .then(() => {
                    alert('âœ… Ú•ÛÚ©Ø®Ø³ØªÙ†Û•Ú©Ø§Ù† Ù¾Ø§Ø´Û•Ú©Û•ÙˆØª Ú©Ø±Ø§Ù†!');
                    applySettings(newSettings);
                    hideSettings();
                })
                .catch((error) => alert('âŒ Ù‡Û•ÚµÛ•: ' + error.message));
        };

        function loadMovies() {
            const moviesRef = ref(database, 'movies');
            onValue(moviesRef, (snapshot) => {
                movies = [];
                snapshot.forEach((childSnapshot) => {
                    movies.push({
                        id: childSnapshot.key,
                        ...childSnapshot.val()
                    });
                });
                displayMovies(filterMovies());
                displayFeatured();
            });
        }

        function displayFeatured() {
            const featured = movies.filter(m => m.featured === true).slice(0, 6);
            const grid = document.getElementById('featuredGrid');
            
            if (featured.length === 0) {
                grid.innerHTML = '';
                return;
            }
            
            grid.innerHTML = '';
            featured.forEach(movie => {
                grid.appendChild(createMovieCard(movie));
            });
        }

        function displayMovies(moviesToShow) {
            const grid = document.getElementById('moviesGrid');
            grid.innerHTML = '';

            if (moviesToShow.length === 0) {
                grid.innerHTML = '<p style="text-align: center; grid-column: 1/-1; padding: 40px;">Ù‡ÛŒÚ† ÙÛŒÙ„Ù…ÛÚ© Ù†Û•Ø¯Û†Ø²Ø±Ø§ÛŒÛ•ÙˆÛ• ğŸ˜¢</p>';
                return;
            }

            const sorted = [...moviesToShow].sort((a, b) => new Date(b.date) - new Date(a.date));
            sorted.forEach(movie => {
                grid.appendChild(createMovieCard(movie));
            });
        }

        function createMovieCard(movie) {
            const card = document.createElement('div');
            card.className = 'movie-card';
            card.onclick = function() { openWatchModal(movie); };

            const views = movie.views || Math.floor(Math.random() * 10000);
            
            card.innerHTML = `
                ${isAdmin ? `
                    <button class="delete-btn" onclick="event.stopPropagation(); deleteMovie('${movie.id}')">Ã—</button>
                    <button class="edit-btn" onclick="event.stopPropagation(); editMovie('${movie.id}')">âœï¸</button>
                ` : ''}
                <div class="movie-poster">
                    <img src="${movie.poster}" alt="${movie.title}" onerror="this.parentElement.innerHTML='ğŸ¬'">
                    <div class="play-icon">â–¶</div>
                    ${movie.rating ? `<div class="rating-badge">â­ ${movie.rating}/10</div>` : ''}
                    <div class="view-count admin-only">
                        ğŸ‘ï¸ ${views.toLocaleString()}
                    </div>
                </div>
                <div class="movie-info">
                    <div class="movie-title">${movie.title}</div>
                    <div class="movie-meta">Ú˜Ø§Ù†Ø±: ${movie.genres}</div>
                    <div class="movie-meta">ÙˆÚµØ§Øª: ${movie.country || 'Ù†Û•Ù†Ø§Ø³Ø±Ø§Ùˆ'}</div>
                    <div class="movie-meta">Ø³Ø§Úµ: ${movie.year}</div>
                    <span class="badge ${movie.type}">${movie.type === 'subtitle' ? 'Ú˜ÛØ±Ù†ÙˆÙˆØ³ÛŒ Ú©ÙˆØ±Ø¯ÛŒ' : 'Ø¯Û†Ø¨Ù„Ø§Ú˜ÛŒ Ú©ÙˆØ±Ø¯ÛŒ'}</span>
                    ${movie.featured ? '<span class="badge" style="background: #ff6b6b;">â­ Ù¾ÛØ´Ù†ÛŒØ§Ø±Ú©Ø±Ø§Ùˆ</span>' : ''}
                </div>
            `;
            return card;
        }

        window.login = function(event) {
            event.preventDefault();
            const email = document.getElementById('loginEmail').value;
            const password = document.getElementById('loginPassword').value;

            signInWithEmailAndPassword(auth, email, password)
                .then(() => {
                    closeLogin();
                    alert('âœ… Ø¨Û• Ø³Û•Ø±Ú©Û•ÙˆØªÙˆÙˆÛŒÛŒ Ú†ÙˆÙˆÛŒØªÛ• Ú˜ÙˆÙˆØ±Û•ÙˆÛ•!');
                })
                .catch(() => alert('âŒ Ø¦ÛŒÙ…Û•ÛŒÚµ ÛŒØ§Ù† Ù¾Ø§Ø³ÙˆÛ†Ø±Ø¯ Ù‡Û•ÚµÛ•ÛŒÛ•!'));
        };

        window.logout = function() {
            signOut(auth).then(() => alert('âœ… Ú†ÙˆÙˆÛŒØªÛ• Ø¯Û•Ø±Û•ÙˆÛ•!'));
        };

        window.openLogin = function() {
            document.getElementById('loginModal').style.display = 'block';
        };

        window.closeLogin = function() {
            document.getElementById('loginModal').style.display = 'none';
        };

        window.openAddModal = function() {
            if (!isAdmin) {
                openLogin();
                return;
            }
            document.getElementById('movieModalTitle').textContent = 'â• Ø²ÛŒØ§Ø¯Ú©Ø±Ø¯Ù†ÛŒ ÙÛŒÙ„Ù…ÛŒ Ù†ÙˆÛ';
            document.getElementById('movieEditId').value = '';
            document.getElementById('movieSubmitBtn').textContent = 'âœ… Ø²ÛŒØ§Ø¯Ú©Ø±Ø¯Ù†';
            document.querySelectorAll('#genreCheckboxes input').forEach(cb => cb.checked = false);
            document.getElementById('addMovieModal').style.display = 'block';
        };

        window.closeAddModal = function() {
            document.getElementById('addMovieModal').style.display = 'none';
        };

        window.editMovie = function(movieId) {
            const movie = movies.find(m => m.id === movieId);
            if (!movie) return;
            
            document.getElementById('movieModalTitle').textContent = 'âœï¸ Ø¯Û•Ø³ØªÚ©Ø§Ø±ÛŒÚ©Ø±Ø¯Ù†ÛŒ ÙÛŒÙ„Ù…';
            document.getElementById('movieEditId').value = movieId;
            document.getElementById('movieType').value = movie.type;
            document.getElementById('movieTitle').value = movie.title;
            document.getElementById('movieCountry').value = movie.country || '';
            document.getElementById('movieYear').value = movie.year;
            document.getElementById('movieRating').value = movie.rating || '';
            document.getElementById('moviePoster').value = movie.poster;
            document.getElementById('videoServer1').value = movie.servers.server1;
            document.getElementById('videoServer2').value = movie.servers.server2 || '';
            document.getElementById('videoServer3').value = movie.servers.server3 || '';
            document.getElementById('movieDescription').value = movie.description || '';
            document.getElementById('movieFeatured').value = movie.featured ? 'true' : 'false';
            document.getElementById('movieSubmitBtn').textContent = 'âœ… Ù†ÙˆÛÚ©Ø±Ø¯Ù†Û•ÙˆÛ•';
            
            const genres = movie.genres.split(', ');
            document.querySelectorAll('#genreCheckboxes input').forEach(cb => {
                cb.checked = genres.includes(cb.value);
            });
            
            document.getElementById('addMovieModal').style.display = 'block';
        };

        window.addMovie = function(event) {
            event.preventDefault();

            const genres = Array.from(document.querySelectorAll('#genreCheckboxes input:checked'))
                .map(cb => cb.value).join(', ');

            if (!genres) {
                alert('ØªÚ©Ø§ÛŒÛ• Ù„Ø§ÛŒÛ•Ù†ÛŒ Ú©Û•Ù… ÛŒÛ•Ú© Ú˜Ø§Ù†Ø± Ù‡Û•ÚµØ¨Ú˜ÛØ±Û•!');
                return;
            }

            let posterUrl = document.getElementById('moviePoster').value;
            let server1 = document.getElementById('videoServer1').value;
            let server2 = document.getElementById('videoServer2').value;
            let server3 = document.getElementById('videoServer3').value;
            
            let hasWarning = false;
            if (posterUrl.startsWith('http://')) {
                posterUrl = posterUrl.replace('http://', 'https://');
                hasWarning = true;
            }
            if (server1.startsWith('http://')) {
                server1 = server1.replace('http://', 'https://');
                hasWarning = true;
            }
            if (server2.startsWith('http://')) {
                server2 = server2.replace('http://', 'https://');
                hasWarning = true;
            }
            if (server3.startsWith('http://')) {
                server3 = server3.replace('http://', 'https://');
                hasWarning = true;
            }
            
            if (hasWarning) {
                alert('âš ï¸ Ù„ÛŒÙ†Ú©Û•Ú©Ø§Ù† Ú¯Û†Ú•Ø¯Ø±Ø§Ù† Ø¨Û† HTTPS Ø¨Û† Ù¾Ø§Ø±Ø§Ø³ØªÙ†ÛŒ Ù¾ØªØ±');
            }

            const movieData = {
                type: document.getElementById('movieType').value,
                title: document.getElementById('movieTitle').value,
                genres: genres,
                country: document.getElementById('movieCountry').value,
                year: document.getElementById('movieYear').value,
                rating: parseFloat(document.getElementById('movieRating').value) || null,
                poster: posterUrl,
                servers: {
                    server1: server1,
                    server2: server2 || '',
                    server3: server3 || ''
                },
                description: document.getElementById('movieDescription').value,
                featured: document.getElementById('movieFeatured').value === 'true',
                date: new Date().toISOString(),
                views: 0
            };

            const movieId = document.getElementById('movieEditId').value;
            
            if (movieId) {
                const movieRef = ref(database, 'movies/' + movieId);
                const existingMovie = movies.find(m => m.id === movieId);
                movieData.views = existingMovie.views || 0;
                
                update(movieRef, movieData)
                    .then(() => {
                        closeAddModal();
                        alert('âœ… ÙÛŒÙ„Ù…Û•Ú©Û• Ø¯Û•Ø³ØªÚ©Ø§Ø±ÛŒ Ú©Ø±Ø§!');
                        event.target.reset();
                    })
                    .catch((error) => alert('âŒ Ù‡Û•ÚµÛ•: ' + error.message));
            } else {
                const moviesRef = ref(database, 'movies');
                const newMovieRef = push(moviesRef);
                set(newMovieRef, movieData)
                    .then(() => {
                        closeAddModal();
                        alert('âœ… ÙÛŒÙ„Ù…Û•Ú©Û• Ø¨Û• Ø³Û•Ø±Ú©Û•ÙˆØªÙˆÙˆÛŒÛŒ Ø²ÛŒØ§Ø¯ Ú©Ø±Ø§!');
                        event.target.reset();
                    })
                    .catch((error) => alert('âŒ Ù‡Û•ÚµÛ•: ' + error.message));
            }
        };

        window.deleteMovie = function(movieId) {
            if (confirm('Ø¯ÚµÙ†ÛŒØ§ÛŒØª Ø¯Û•ØªÛ•ÙˆÛØª Ø¦Û•Ù… ÙÛŒÙ„Ù…Û• Ø¨Ø³Ú•ÛŒØªÛ•ÙˆÛ•ØŸ')) {
                const movieRef = ref(database, 'movies/' + movieId);
                remove(movieRef)
                    .then(() => alert('âœ… ÙÛŒÙ„Ù…Û•Ú©Û• Ø³Ú•Ø§ÛŒÛ•ÙˆÛ•!'))
                    .catch((error) => alert('âŒ Ù‡Û•ÚµÛ•: ' + error.message));
            }
        };

        window.openMovieById = function(movieId) {
            const movie = movies.find(m => m.id === movieId);
            if (movie) {
                openWatchModal(movie);
            }
        };

        window.openWatchModal = function(movie) {
            if (!isAdmin) {
                const movieRef = ref(database, 'movies/' + movie.id);
                update(movieRef, { views: (movie.views || 0) + 1 });
            }

            const content = document.getElementById('watchContent');

            let serversHTML = '';
            if (movie.servers.server1) serversHTML += `<button class="server-btn active" onclick="switchServer('${movie.servers.server1}', this)">Ø³ÛØ±Ú¤Û•Ø± Ù¡ (Upstream)</button>`;
            if (movie.servers.server2) serversHTML += `<button class="server-btn" onclick="switchServer('${movie.servers.server2}', this)">Ø³ÛØ±Ú¤Û•Ø± Ù¢ (Filemoon)</button>`;
            if (movie.servers.server3) serversHTML += `<button class="server-btn" onclick="switchServer('${movie.servers.server3}', this)">Ø³ÛØ±Ú¤Û•Ø± Ù£ (MixDrop)</button>`;

            content.innerHTML = `
                <h2>${movie.title}</h2>
                <div style="margin: 15px 0;">
                    <span class="badge ${movie.type}">${movie.type === 'subtitle' ? 'Ú˜ÛØ±Ù†ÙˆÙˆØ³ÛŒ Ú©ÙˆØ±Ø¯ÛŒ' : 'Ø¯Û†Ø¨Ù„Ø§Ú˜ÛŒ Ú©ÙˆØ±Ø¯ÛŒ'}</span>
                    ${movie.rating ? `<span class="badge" style="background: #ffd700; color: #333;">â­ ${movie.rating}/10</span>` : ''}
                    ${isAdmin ? `<span class="badge" style="background: #4CAF50;">ğŸ‘ï¸ ${(movie.views || 0).toLocaleString()} Ø¨ÛŒÙ†ÛŒÙ†</span>` : ''}
                </div>
                ${serversHTML ? `<div class="server-tabs">${serversHTML}</div>` : ''}
                <iframe id="videoFrame" class="video-player" src="${movie.servers.server1}" frameborder="0" allowfullscreen allow="autoplay"></iframe>
                <div class="movie-meta">Ú˜Ø§Ù†Ø±: ${movie.genres} | ÙˆÚµØ§Øª: ${movie.country || 'Ù†Û•Ù†Ø§Ø³Ø±Ø§Ùˆ'} | Ø³Ø§Úµ: ${movie.year}</div>
                ${movie.description ? `<p style="margin-top: 15px; line-height: 1.6;">${movie.description}</p>` : ''}
            `;

            document.getElementById('watchModal').style.display = 'block';
        };

        window.switchServer = function(url, btn) {
            document.querySelectorAll('.server-btn').forEach(b => b.classList.remove('active'));
            btn.classList.add('active');
            document.getElementById('videoFrame').src = url;
        };

        window.closeWatchModal = function() {
            document.getElementById('watchModal').style.display = 'none';
            document.getElementById('videoFrame').src = '';
        };

        window.searchMovies = function() {
            const term = document.getElementById('searchInput').value.toLowerCase();
            const filtered = movies.filter(m => 
                m.title.toLowerCase().includes(term) || 
                m.genres.toLowerCase().includes(term) ||
                (m.country && m.country.toLowerCase().includes(term))
            );
            displayMovies(filtered);
        };

        window.showTab = function(type) {
            currentFilter = type;
            displayMovies(filterMovies());
        };

        function filterMovies() {
            if (currentFilter === 'all') return movies;
            if (currentFilter === 'latest') return movies.slice(0, 12);
            if (currentFilter === 'subtitle' || currentFilter === 'dubbed') {
                return movies.filter(m => m.type === currentFilter);
            }
            return movies.filter(m => m.country === currentFilter || m.genres.includes(currentFilter));
        }

        window.onclick = function(event) {
            if (event.target.className === 'modal') {
                event.target.style.display = 'none';
            }
        };
    </script>
</body>
</html>
            
                